#########################################
#  UCG Cart - Stage 4
#########################################

$HandScrub outline.on
$Catheter outline.on
$UrineBag outline.on
$Tape outline.on
$CottonBalls outline.on
$DrapePackage outline.on

$HandScrub clickable true
$Catheter clickable true
$UrineBag clickable true
$Tape clickable true
$CottonBalls clickable true
$DrapePackage clickable true

$Patient clickable false
$Patient outline.off

label 'CartLoop'

	If
		$HandScrub pressed
	Then
		$HandScrub reset
		Do 'UCGTools/HandScrub.txt'
	Endif

	If
		$DrapePackage pressed
	Then
		$DrapePackage reset
		Do 'UCGTools/Drape.txt'
	Endif

	If
		$CatheterBalloon pressed
	Then
		$CatheterBalloon reset
		$CatheterPort = $CatheterBalloon + '/Handle/Port'
		If
			$SyringeFull = true
		Then
			$CatheterBalloon localmovey .2 1
			wait 1
			$CatheterBalloon localmovez -.1 1
			wait 1
			$Syringe moveto $CatheterPort 1
			wait 1
			$Syringe localmovex .12 .1
			wait .2
			$Syringe localrotatez -90 .1
			wait .2
			$Plunger localmovey -.06 2
			$CatheterBalloon play Grow true
			wait 4
			$Plunger localmovey .06 2
			$CatheterBalloon play Grow false
			wait 2
			$CatheterBalloon moveto $CartPos6 1
			wait .5
			Destroy $Syringe
			$CatheterBalloon clickable false
		Endif
	Endif

	If
		$UrineBag pressed
	Then
		$UrineBag reset
		Do 'UCGTools/UrineBag.txt'
	Endif

	If
		$Tape pressed
	Then
		$Tape reset
		Do 'UCGTools/Tape.txt'
	Endif

	If
		$CottonBalls pressed
	Then
		$CottonBalls reset
		Player align $UrinaryProcPos 1
		Wait 1
#		Prompt 'lookAt'
		Player lookAt $PatientGenitals -0.05 0.2 .05 1
		Wait 1

		#$whichHand = 'right' 
		Do 'NEWS_Nurse/CleanGenitalia' 'right'

		Player align $CartLook 1
	Endif

	If
		$BackECG pressed
	Then
		$BackECG reset
		Do 'UCGTools/ExitCart.txt'
		Return
	Endif

	wait .2
Goto 'CartLoop'