#H1RubPalms - rub palm of chosen hand on dorsal of other hand
#Do 'H1RubPalms' ['right'|'left']
#Param[1] : $WhichHand
#Requires:
# $PlayerNurse, $LeftHandSpot, $RightHandSpot, $LeftHandDorsal, $RightHandDorsal

#Do 'RubPalmToPalm' $param[1]

#Prompt 'RubPalms'

############# Get parameters
If
    $param[1] != ' '
Then
    $whichHand = param[1]
Endif 

#$whichHand = 'right'

Prompt 'RubPalms: ' + whichHand
Wait 1
Prompt ''
############# Create spot for hand to follow
$MainHandTarget = 'MainHandTarget'
Create PalmLocator $MainHandTarget

$OtherHandTarget = 'OtherHandTarget'
Create Locator $OtherHandTarget

############# Set hand-specific variables and reach out other hand
If
    $whichHand == 'right'
Then
    $GrabType = 'grabRight.elbowin'
    $OtherHandTarget align $LeftHandSpot 0
    Wait 0
    $PlayerNurse grabLeft.elbowin $OtherHandTarget .1 'vertical' 
    Wait .5
    Prompt 'Aligning'
    $MainHandTarget align $LeftHandPalm 0    #can't attach because of Unity IK loop problem
    Prompt 'Aligned'
    Wait 0
Else
    $GrabType = 'grabLeft.elbowin'
    $OtherHandTarget align $RightHandSpot 0
    Wait 0
    $PlayerNurse grabRight.elbowin $OtherHandTarget .1 'vertical' 
    Wait .5
    $MainHandTarget align $RightHandPalm 0   #can't attach because of Unity IK loop problem
    Wait 0
Endif


############# Move chosen hand to spot to follow
$HandPlane = 'vertical'
$HandShape = ' ' #'R_grip'
$PlayerNurse $GrabType $MainHandTarget .8 $HandPlane $HandShape
#Wait 0

#If
#    $whichHand == 'right'
#Then
#    $MainHandTarget localRotateZ 180 0  #flip to point in right direction
#Endif

Wait .5

############# Do cleaning motion
#Repeat 5 times

Prompt 'Begin Scrubbing'
Wait 1

$scrubDuration = 0.5

$MainHandTarget moveForward .10 $scrubDuration
$OtherHandTarget moveForward -.10 $scrubDuration
Wait $scrubDuration
$MainHandTarget moveForward -.10 $scrubDuration
$OtherHandTarget moveForward .10 $scrubDuration
Wait $scrubDuration

$MainHandTarget moveForward .10 $scrubDuration
#$OtherHandTarget moveForward -.10 $scrubDuration
Wait $scrubDuration
$MainHandTarget moveForward -.10 $scrubDuration
#$OtherHandTarget moveForward .10 $scrubDuration
Wait $scrubDuration

$MainHandTarget moveForward .10 $scrubDuration
$OtherHandTarget moveForward -.10 $scrubDuration
Wait $scrubDuration
$MainHandTarget moveForward -.10 $scrubDuration
$OtherHandTarget moveForward .10 $scrubDuration
Wait $scrubDuration

$MainHandTarget moveForward .10 $scrubDuration
$OtherHandTarget moveForward -.10 $scrubDuration
Wait $scrubDuration
$MainHandTarget moveForward -.10 $scrubDuration
$OtherHandTarget moveForward .10 $scrubDuration
Wait $scrubDuration

$MainHandTarget moveForward .10 $scrubDuration
$OtherHandTarget moveForward -.10 $scrubDuration
Wait $scrubDuration
$MainHandTarget moveForward -.10 $scrubDuration
$OtherHandTarget moveForward .10 $scrubDuration
Wait $scrubDuration

#Prompt 'Done Scrubbing'
#Wait 1

############# Destroy temporary spot to follow and put down hands

#right hand
$PlayerNurse releaseLeft 1 $HandShape
#left hand
$PlayerNurse releaseRight 1 $HandShape


#Prompt 'Put down hands'
Wait 1  #wait for hands to come down

Destroy $MainHandTarget
Destroy $OtherHandTarget





